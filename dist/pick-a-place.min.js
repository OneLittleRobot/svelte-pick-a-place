var PickAPlace=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function o(){return Object.create(null)}function l(e){e.forEach(n)}function c(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e,n,o){return e[1]?t({},t(n.$$scope.ctx,e[1](o?o(n):{}))):n.$$scope.ctx}function s(e,t){e.appendChild(t)}function r(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function g(){return p(" ")}function f(){return p("")}function m(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function $(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function y(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function h(e,t){t=""+t,e.data!==t&&(e.data=t)}function v(e,t,n){e.classList[n?"add":"remove"](t)}let b;function M(e){b=e}function _(){if(!b)throw new Error("Function called outside component initialization");return b}function k(e){_().$$.on_mount.push(e)}function x(e){_().$$.on_destroy.push(e)}function w(){const e=b;return(t,n)=>{const o=e.$$.callbacks[t];if(o){const l=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);o.slice().forEach(t=>{t.call(e,l)})}}}function C(e){return _().$$.context.get(e)}function O(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}const E=[],P=[],S=[],T=[],A=Promise.resolve();let N=!1;function z(){N||(N=!0,A.then(j))}function F(e){S.push(e)}function j(){const e=new Set;do{for(;E.length;){const e=E.shift();M(e),I(e.$$)}for(;P.length;)P.pop()();for(let t=0;t<S.length;t+=1){const n=S[t];e.has(n)||(n(),e.add(n))}S.length=0}while(E.length);for(;T.length;)T.pop()();N=!1}function I(e){e.fragment&&(e.update(e.dirty),l(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(F))}const q=new Set;let B;function D(){B={r:0,c:[],p:B}}function U(){B.r||l(B.c),B=B.p}function V(e,t){e&&e.i&&(q.delete(e),e.i(t))}function Y(e,t,n,o){if(e&&e.o){if(q.has(e))return;q.add(e),B.c.push(()=>{q.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}function Z(e,t,o){const{fragment:i,on_mount:a,on_destroy:s,after_update:r}=e.$$;i.m(t,o),F(()=>{const t=a.map(n).filter(c);s?s.push(...t):l(t),e.$$.on_mount=[]}),r.forEach(F)}function G(e,t){e.$$.fragment&&(l(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function H(t,n,c,i,a,s){const r=b;M(t);const d=n.props||{},u=t.$$={fragment:null,ctx:null,props:s,update:e,not_equal:a,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(r?r.$$.context:[]),callbacks:o(),dirty:null};let p=!1;u.ctx=c?c(t,d,(e,n,l=n)=>(u.ctx&&a(u.ctx[e],u.ctx[e]=l)&&(u.bound[e]&&u.bound[e](l),p&&function(e,t){e.$$.dirty||(E.push(e),z(),e.$$.dirty=o()),e.$$.dirty[t]=!0}(t,e)),n)):d,u.update(),p=!0,l(u.before_update),u.fragment=i(u.ctx),n.target&&(n.hydrate?u.fragment.l(function(e){return Array.from(e.childNodes)}(n.target)):u.fragment.c(),n.intro&&V(t.$$.fragment),Z(t,n.target,n.anchor),j()),M(r)}class J{$destroy(){G(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}const K={};function Q(e){var t,n,o,l,c=e.editModeEnabled("point"),i=e.editModeEnabled("polygon"),a=c&&function(e){var t,n;return{c(){(t=u("button")).textContent="Point",y(t,"data-testid","point-mode-btn"),y(t,"type","button"),y(t,"class","pick-a-place__button"),v(t,"active","point"===e.mode),n=m(t,"click",$(e.click_handler))},m(e,n){r(e,t,n)},p(e,n){e.mode&&v(t,"active","point"===n.mode)},d(e){e&&d(t),n()}}}(e),p=i&&function(e){var t,n;return{c(){(t=u("button")).textContent="Polygon",y(t,"data-testid","polygon-mode-btn"),y(t,"type","button"),y(t,"class","pick-a-place__button"),v(t,"active","polygon"===e.mode),n=m(t,"click",$(e.click_handler_1))},m(e,n){r(e,t,n)},p(e,n){e.mode&&v(t,"active","polygon"===n.mode)},d(e){e&&d(t),n()}}}(e);return{c(){t=u("div"),(n=u("h4")).textContent="Mode",o=g(),a&&a.c(),l=g(),p&&p.c(),y(t,"class","pick-a-place__drawing-toolbar")},m(e,c){r(e,t,c),s(t,n),s(t,o),a&&a.m(t,null),s(t,l),p&&p.m(t,null)},p(e,t){c&&a.p(e,t),i&&p.p(e,t)},d(e){e&&d(t),a&&a.d(),p&&p.d()}}}function R(t){var n,o=t.selectionModes.length>1&&Q(t);return{c(){n=u("div"),o&&o.c(),y(n,"class","pick-a-place__drawing-toolbar-wrapper")},m(e,t){r(e,n,t),o&&o.m(n,null)},p(e,t){t.selectionModes.length>1?o?o.p(e,t):((o=Q(t)).c(),o.m(n,null)):o&&(o.d(1),o=null)},i:e,o:e,d(e){e&&d(n),o&&o.d()}}}function W(e,t,n){const o=w(),{getMap:l,getLeaflet:c}=C(K);let{mode:i,selectionModes:a=["point","polygon"]}=t;const s=e=>{n("mode",i=e),o("setMode",i)};return e.$set=e=>{"mode"in e&&n("mode",i=e.mode),"selectionModes"in e&&n("selectionModes",a=e.selectionModes)},{mode:i,selectionModes:a,setMode:s,editModeEnabled:e=>a.includes(e),click_handler:()=>s("point"),click_handler_1:()=>s("polygon")}}class X extends J{constructor(e){super(),H(this,e,W,R,i,["mode","selectionModes"])}}function ee(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function te(e,t,n){const{getMap:o,getLeaflet:l}=C(K),c=w();let i,{lat:a,lng:s,clickable:r=!1}=t,d=o(),u=l();const p=()=>{r&&c("click")};return x(()=>{i&&d.removeLayer(i)}),e.$set=e=>{"lat"in e&&n("lat",a=e.lat),"lng"in e&&n("lng",s=e.lng),"clickable"in e&&n("clickable",r=e.clickable)},e.$$.update=(e={lat:1,lng:1,marker:1,leaflet:1,map:1})=>{(e.lat||e.lng||e.marker||e.leaflet||e.map)&&(a&&s?i?i.setLatLng([a,s]):(n("marker",i=u.marker([a,s]).addTo(d)),i.on("click",p)):i&&d.removeLayer(i))},{lat:a,lng:s,clickable:r}}class ne extends J{constructor(e){super(),H(this,e,te,ee,i,["lat","lng","clickable"])}}function oe(e){var t,n=new ne({props:{lat:e.lat,lng:e.lng}});return{c(){n.$$.fragment.c()},m(e,o){Z(n,e,o),t=!0},p(e,t){var o={};e.lat&&(o.lat=t.lat),e.lng&&(o.lng=t.lng),n.$set(o)},i(e){t||(V(n.$$.fragment,e),t=!0)},o(e){Y(n.$$.fragment,e),t=!1},d(e){G(n,e)}}}function le(e){var t,n,o=e.lat&&e.lng&&oe(e);return{c(){o&&o.c(),t=f()},m(e,l){o&&o.m(e,l),r(e,t,l),n=!0},p(e,n){n.lat&&n.lng?o?(o.p(e,n),V(o,1)):((o=oe(n)).c(),V(o,1),o.m(t.parentNode,t)):o&&(D(),Y(o,1,1,()=>{o=null}),U())},i(e){n||(V(o),n=!0)},o(e){Y(o),n=!1},d(e){o&&o.d(e),e&&d(t)}}}function ce(e,t,n){const o=w(),{getMap:l}=C(K);let c,i,{selection:a}=t,s=l();k(()=>{null!=a&&"Point"===a.geometry.type&&(n("lng",i=a.geometry.coordinates[0]),n("lat",c=a.geometry.coordinates[1]))});const r=e=>{n("lat",c=e.latlng.lat),n("lng",i=e.latlng.lng),o("update",e.latlng)};return s.on("click",r),x(()=>s.off("click",r)),e.$set=e=>{"selection"in e&&n("selection",a=e.selection)},{selection:a,lat:c,lng:i}}class ie extends J{constructor(e){super(),H(this,e,ce,le,i,["selection"])}}function ae(e,t){return e.lat===t.lat&&e.lng===t.lng}function se(e){var t,n=new ne({props:{lat:e.coordinates[0].lat,lng:e.coordinates[0].lng,clickable:e.allowClosingPolygon}});return n.$on("click",e.closePolygon),{c(){n.$$.fragment.c()},m(e,o){Z(n,e,o),t=!0},p(e,t){var o={};e.coordinates&&(o.lat=t.coordinates[0].lat),e.coordinates&&(o.lng=t.coordinates[0].lng),e.allowClosingPolygon&&(o.clickable=t.allowClosingPolygon),n.$set(o)},i(e){t||(V(n.$$.fragment,e),t=!0)},o(e){Y(n.$$.fragment,e),t=!1},d(e){G(n,e)}}}function re(e){var t,n,o=e.coordinates.length>0&&e.polyline.getLatLngs().length>0,l=o&&se(e);return{c(){l&&l.c(),t=f()},m(e,o){l&&l.m(e,o),r(e,t,o),n=!0},p(e,n){e.coordinates&&(o=n.coordinates.length>0&&n.polyline.getLatLngs().length>0),o?l?(l.p(e,n),V(l,1)):((l=se(n)).c(),V(l,1),l.m(t.parentNode,t)):l&&(D(),Y(l,1,1,()=>{l=null}),U())},i(e){n||(V(l),n=!0)},o(e){Y(l),n=!1},d(e){l&&l.d(e),e&&d(t)}}}function de(e,t,n){const o=w(),{getMap:l}=C(K);let{coordinates:c=[]}=t;const i=l();let a,s=L.polyline([],{color:"red"}).addTo(i),r=L.polygon([],{color:"red"}).addTo(i);function d(){const e=c[0],t=c[c.length-1];c.length>1&&ae(e,t)?(r.setLatLngs([c]),s.setLatLngs([]),console.log("Dispatch complete"),o("complete",c)):(s.setLatLngs(c),r.setLatLngs([]))}return k(()=>d()),x(()=>{i.removeLayer(s),i.removeLayer(r)}),e.$set=e=>{"coordinates"in e&&n("coordinates",c=e.coordinates)},e.$$.update=(e={coordinates:1})=>{e.coordinates&&c.length>0&&d(),e.coordinates&&n("allowClosingPolygon",a=c.length>2&&!ae(c[0],c[c.length-1]))},{coordinates:c,polyline:s,closePolygon:function(){n("coordinates",c=[...c,c[0]])},allowClosingPolygon:a}}class ue extends J{constructor(e){super(),H(this,e,de,re,i,["coordinates"])}}function pe(e){var t,n;function o(n){var o;e.leafletpolygon_coordinates_binding.call(null,n),t=!0,o=()=>t=!1,T.push(o)}let l={};void 0!==e.coordinates&&(l.coordinates=e.coordinates);var c=new ue({props:l});return P.push(()=>(function(e,t,n){-1!==e.$$.props.indexOf(t)&&(e.$$.bound[t]=n,n(e.$$.ctx[t]))})(c,"coordinates",o)),c.$on("complete",e.complete_handler),{c(){c.$$.fragment.c()},m(e,t){Z(c,e,t),n=!0},p(e,n){var o={};!t&&e.coordinates&&(o.coordinates=n.coordinates),c.$set(o)},i(e){n||(V(c.$$.fragment,e),n=!0)},o(e){Y(c.$$.fragment,e),n=!1},d(e){G(c,e)}}}function ge(e,t,n){const o=w(),{getMap:l}=C(K);let{selection:c}=t,i=[],a=l();null!=c&&"Polygon"===c.geometry.type&&n("coordinates",i=c.geometry.coordinates[0].map(e=>({lat:e[1],lng:e[0]})));const s=e=>{i.length>2&&ae(i[0],i[i.length-1])||(n("coordinates",i=[...i,e.latlng]),o("update",i))};a.on("click",s),x(()=>a.off("click",s));return e.$set=e=>{"selection"in e&&n("selection",c=e.selection)},{dispatch:o,selection:c,coordinates:i,leafletpolygon_coordinates_binding:function(e){n("coordinates",i=e)},complete_handler:({detail:e})=>o("complete",e)}}class fe extends J{constructor(e){super(),H(this,e,ge,pe,i,["selection"])}}function me(e){return!Array.isArray(e)||e.length<2?$e({type:"Point",coordinates:[(t=e).lng,t.lat]}):e.length>2&&ae(e[0],e[e.length-1])?$e({type:"Polygon",coordinates:[e.map(e=>[e.lng,e.lat])]}):function(e){return $e({type:"LineString",coordinates:[e.map(e=>[e.lng,e.lat])]})}(e);var t}function $e(e){return{type:"Feature",geometry:e}}function ye(e){var t,n=new fe({props:{selection:e.position}});return n.$on("update",e.update_handler_1),n.$on("complete",e.complete_handler),{c(){n.$$.fragment.c()},m(e,o){Z(n,e,o),t=!0},p(e,t){var o={};e.position&&(o.selection=t.position),n.$set(o)},i(e){t||(V(n.$$.fragment,e),t=!0)},o(e){Y(n.$$.fragment,e),t=!1},d(e){G(n,e)}}}function he(e){var t,n=new ie({props:{selection:e.position}});return n.$on("update",e.update_handler),{c(){n.$$.fragment.c()},m(e,o){Z(n,e,o),t=!0},p(e,t){var o={};e.position&&(o.selection=t.position),n.$set(o)},i(e){t||(V(n.$$.fragment,e),t=!0)},o(e){Y(n.$$.fragment,e),t=!1},d(e){G(n,e)}}}function ve(e){var t;function n(e,t){return"point"===t.selectionMode?Me:"polygon"===t.selectionMode?be:void 0}var o=n(0,e),l=o&&o(e);return{c(){t=u("div"),l&&l.c(),y(t,"class","pick-a-place__guide-panel"),y(t,"data-testid","guide-overlay")},m(e,n){r(e,t,n),l&&l.m(t,null)},p(e,c){o===(o=n(0,c))&&l?l.p(e,c):(l&&l.d(1),(l=o&&o(c))&&(l.c(),l.m(t,null)))},d(e){e&&d(t),l&&l.d()}}}function be(e){var t,n;return{c(){t=u("span"),n=p(e.polygonInstructionText)},m(e,o){r(e,t,o),s(t,n)},p(e,t){e.polygonInstructionText&&h(n,t.polygonInstructionText)},d(e){e&&d(t)}}}function Me(e){var t;function n(e,t){return null!=t.position&&null!=t.position.lat?ke:_e}var o=n(0,e),l=o(e);return{c(){l.c(),t=f()},m(e,n){l.m(e,n),r(e,t,n)},p(e,c){o===(o=n(0,c))&&l?l.p(e,c):(l.d(1),(l=o(c))&&(l.c(),l.m(t.parentNode,t)))},d(e){l.d(e),e&&d(t)}}}function _e(t){var n;return{c(){(n=u("span")).textContent="Click the map to select a position"},m(e,t){r(e,n,t)},p:e,d(e){e&&d(n)}}}function ke(e){var t,n,o,l,c,i=e.position.lat.toFixed(5)+"",a=e.position.lng.toFixed(5)+"";return{c(){t=u("span"),n=p("Latitude: "),o=p(i),l=p(" Longitude: "),c=p(a)},m(e,i){r(e,t,i),s(t,n),s(t,o),s(t,l),s(t,c)},p(e,t){e.position&&i!==(i=t.position.lat.toFixed(5)+"")&&h(o,i),e.position&&a!==(a=t.position.lng.toFixed(5)+"")&&h(c,a)},d(e){e&&d(t)}}}function xe(e){var t,n,o,c,i,a,f,h,v="polygon"===e.selectionMode&&e.selectionComplete&&we(e);return{c(){t=u("div"),(n=u("button")).textContent="Cancel",o=g(),v&&v.c(),c=g(),i=u("button"),a=p("Use selection"),y(n,"class","pick-a-place__button"),y(n,"type","button"),y(i,"class","pick-a-place__button"),y(i,"type","button"),i.disabled=f=!e.selectionComplete,y(t,"class","pick-a-place__button-panel"),y(t,"data-testid","button-overlay"),h=[m(n,"click",$(e.click_handler)),m(i,"click",$(e.click_handler_1))]},m(e,l){r(e,t,l),s(t,n),s(t,o),v&&v.m(t,null),s(t,c),s(t,i),s(i,a)},p(e,n){"polygon"===n.selectionMode&&n.selectionComplete?v||((v=we(n)).c(),v.m(t,c)):v&&(v.d(1),v=null),e.selectionComplete&&f!==(f=!n.selectionComplete)&&(i.disabled=f)},d(e){e&&d(t),v&&v.d(),l(h)}}}function we(e){var t,n;return{c(){(t=u("button")).textContent="Clear selection",y(t,"class","pick-a-place__button"),y(t,"type","button"),n=m(t,"click",$(e.resetSelection))},m(e,n){r(e,t,n)},d(e){e&&d(t),n()}}}function Le(e){var t,n,o,l,c,i,a,s=new X({props:{mode:e.selectionMode,selectionModes:e.selectionModes}});s.$on("setMode",e.handleSetMode);var u=[he,ye],p=[];function m(e,t){return"point"===t.selectionMode?0:"polygon"===t.selectionMode?1:-1}~(n=m(0,e))&&(o=p[n]=u[n](e));var $=e.guideOverlay&&ve(e),y=e.buttons&&xe(e);return{c(){s.$$.fragment.c(),t=g(),o&&o.c(),l=g(),$&&$.c(),c=g(),y&&y.c(),i=f()},m(e,o){Z(s,e,o),r(e,t,o),~n&&p[n].m(e,o),r(e,l,o),$&&$.m(e,o),r(e,c,o),y&&y.m(e,o),r(e,i,o),a=!0},p(e,t){var a={};e.selectionMode&&(a.mode=t.selectionMode),e.selectionModes&&(a.selectionModes=t.selectionModes),s.$set(a);var r=n;(n=m(0,t))===r?~n&&p[n].p(e,t):(o&&(D(),Y(p[r],1,1,()=>{p[r]=null}),U()),~n?((o=p[n])||(o=p[n]=u[n](t)).c(),V(o,1),o.m(l.parentNode,l)):o=null),t.guideOverlay?$?$.p(e,t):(($=ve(t)).c(),$.m(c.parentNode,c)):$&&($.d(1),$=null),t.buttons?y?y.p(e,t):((y=xe(t)).c(),y.m(i.parentNode,i)):y&&(y.d(1),y=null)},i(e){a||(V(s.$$.fragment,e),V(o),a=!0)},o(e){Y(s.$$.fragment,e),Y(o),a=!1},d(e){G(s,e),e&&d(t),~n&&p[n].d(e),e&&d(l),$&&$.d(e),e&&d(c),y&&y.d(e),e&&d(i)}}}function Ce(e,t,n){const o=w();let{placeMarker:l=!0,guideOverlay:c=!0,buttons:i=!0,selectionModes:a,selectionMode:s=null,selection:r=null}=t,d=r,u=!1;null==s&&n("selectionMode",s=a[0]),console.log("Selection mode: ",s);const p=(e,t=!1)=>{n("selectionComplete",u=t),n("position",d=e),function(e){return!Array.isArray(e)||e.length>2&&ae(e[0],e[e.length-1])}(d)&&o("update",me(d))},g=e=>{console.log("Complete polygon"),p(e,!0)};let f;return e.$set=e=>{"placeMarker"in e&&n("placeMarker",l=e.placeMarker),"guideOverlay"in e&&n("guideOverlay",c=e.guideOverlay),"buttons"in e&&n("buttons",i=e.buttons),"selectionModes"in e&&n("selectionModes",a=e.selectionModes),"selectionMode"in e&&n("selectionMode",s=e.selectionMode),"selection"in e&&n("selection",r=e.selection)},e.$$.update=(e={position:1})=>{e.position&&n("polygonInstructionText",f=(e=>null!=e&&e.length?u?"Selection complete":e.length<=2?"Select the next point":e.length>2?"Add additional points or click the start position to finish editing.":void 0:"Select polygon start position")(d))},{dispatch:o,placeMarker:l,guideOverlay:c,buttons:i,selectionModes:a,selectionMode:s,selection:r,position:d,selectionComplete:u,setPosition:p,completePolygon:g,handleSetMode:({detail:e})=>{n("position",d=null),n("selectionComplete",u=!1),n("selectionMode",s=e)},resetSelection:async({detail:e})=>{n("selectionComplete",u=!1),n("position",d=null);const t=s;n("selectionMode",s=-1),await(z(),A),n("selectionMode",s=t)},polygonInstructionText:f,update_handler:({detail:e})=>p(e,!0),update_handler_1:({detail:e})=>p(e),complete_handler:({detail:e})=>g(e),click_handler:()=>o("cancel"),click_handler_1:()=>o("save",me(d))}}class Oe extends J{constructor(e){super(),H(this,e,Ce,Le,i,["placeMarker","guideOverlay","buttons","selectionModes","selectionMode","selection"])}}function Ee(e){var t,n=new Oe({props:{guideOverlay:e.guideOverlay,buttons:e.buttons,selection:e.selection,selectionModes:e.selectionModes,selectionMode:e.selectionMode}});return n.$on("update",e.update_handler),n.$on("save",e.save_handler),n.$on("cancel",e.cancel_handler),{c(){n.$$.fragment.c()},m(e,o){Z(n,e,o),t=!0},p(e,t){var o={};e.guideOverlay&&(o.guideOverlay=t.guideOverlay),e.buttons&&(o.buttons=t.buttons),e.selection&&(o.selection=t.selection),e.selectionModes&&(o.selectionModes=t.selectionModes),e.selectionMode&&(o.selectionMode=t.selectionMode),n.$set(o)},i(e){t||(V(n.$$.fragment,e),t=!0)},o(e){Y(n.$$.fragment,e),t=!1},d(e){G(n,e)}}}function Pe(e){var n,o,l,c,i;const p=e.$$slots.default,f=function(e,t,n){if(e){const o=a(e,t,n);return e[0](o)}}(p,e,null);var m=e.map&&Ee(e);return{c(){n=u("div"),o=u("div"),l=u("div"),f&&f.c(),c=g(),m&&m.c(),y(l,"class","pick-a-place__overlay-content"),y(o,"class","pick-a-place__overlay-container"),y(n,"class","pick-a-place svelte-pey6zq")},l(e){f&&f.l(div0_nodes)},m(t,a){r(t,n,a),s(n,o),s(o,l),f&&f.m(l,null),s(l,c),m&&m.m(l,null),e.div2_binding(n),i=!0},p(e,n){f&&f.p&&e.$$scope&&f.p(function(e,n,o,l){return e[1]?t({},t(n.$$scope.changed||{},e[1](l?l(o):{}))):n.$$scope.changed||{}}(p,n,e,null),a(p,n,null)),n.map?m?(m.p(e,n),V(m,1)):((m=Ee(n)).c(),V(m,1),m.m(l,null)):m&&(D(),Y(m,1,1,()=>{m=null}),U())},i(e){i||(V(f,e),V(m),i=!0)},o(e){Y(f,e),Y(m),i=!1},d(t){t&&d(n),f&&f.d(t),m&&m.d(),e.div2_binding(null)}}}function Se(e,t,n){let{leaflet:o,lat:l=45,lng:c=0,zoom:i=3,guideOverlay:a=!0,buttons:s=!0,selectionModes:r=["point","polygon"],selection:d=null}=t;var u,p;let g,f;u=K,p={getMap:()=>f,getLeaflet:()=>o},_().$$.context.set(u,p);let m=null;if(null!=d&&"object"!=typeof d)throw new Error('The value of "selection" must be an object');if(null!=d){const e=d.geometry.type.toLowerCase();if(!r.includes(e))throw new Error("The provided default selection object has a geometry of type 0, which is not included in the allowed selection modes");n("selectionMode",m=e),console.log("Setting selectionMode to ",e)}k(()=>{if(null==o)throw new Error("No Leaflet instance was provided.");n("map",f=o.map(g).setView([l,c],i)),o.tileLayer("https://a.tile.openstreetmap.org/{z}/{x}/{y}.png ",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',maxZoom:18}).addTo(f)});let{$$slots:$={},$$scope:y}=t;return e.$set=e=>{"leaflet"in e&&n("leaflet",o=e.leaflet),"lat"in e&&n("lat",l=e.lat),"lng"in e&&n("lng",c=e.lng),"zoom"in e&&n("zoom",i=e.zoom),"guideOverlay"in e&&n("guideOverlay",a=e.guideOverlay),"buttons"in e&&n("buttons",s=e.buttons),"selectionModes"in e&&n("selectionModes",r=e.selectionModes),"selection"in e&&n("selection",d=e.selection),"$$scope"in e&&n("$$scope",y=e.$$scope)},{leaflet:o,lat:l,lng:c,zoom:i,guideOverlay:a,buttons:s,selectionModes:r,selection:d,mapElement:g,map:f,selectionMode:m,update_handler:function(t){O(e,t)},save_handler:function(t){O(e,t)},cancel_handler:function(t){O(e,t)},div2_binding:function(e){P[e?"unshift":"push"](()=>{n("mapElement",g=e)})},$$slots:$,$$scope:y}}return class extends J{constructor(e){super(),H(this,e,Se,Pe,i,["leaflet","lat","lng","zoom","guideOverlay","buttons","selectionModes","selection"])}}}();
