var PickAPlace=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function o(){return Object.create(null)}function l(e){e.forEach(n)}function c(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e,n,o){return e[1]?t({},t(n.$$scope.ctx,e[1](o?o(n):{}))):n.$$scope.ctx}function r(e,t){e.appendChild(t)}function s(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function g(){return p(" ")}function f(){return p("")}function m(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function $(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function y(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function h(e,t){t=""+t,e.data!==t&&(e.data=t)}function v(e,t,n){e.classList[n?"add":"remove"](t)}let b;function M(e){b=e}function _(){if(!b)throw new Error("Function called outside component initialization");return b}function k(e){_().$$.on_mount.push(e)}function x(e){_().$$.on_destroy.push(e)}function w(){const e=b;return(t,n)=>{const o=e.$$.callbacks[t];if(o){const l=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);o.slice().forEach(t=>{t.call(e,l)})}}}function C(e){return _().$$.context.get(e)}function O(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}const E=[],P=[],S=[],T=[],A=Promise.resolve();let N=!1;function z(){N||(N=!0,A.then(j))}function F(e){S.push(e)}function j(){const e=new Set;do{for(;E.length;){const e=E.shift();M(e),I(e.$$)}for(;P.length;)P.pop()();for(let t=0;t<S.length;t+=1){const n=S[t];e.has(n)||(n(),e.add(n))}S.length=0}while(E.length);for(;T.length;)T.pop()();N=!1}function I(e){e.fragment&&(e.update(e.dirty),l(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(F))}const q=new Set;let B;function U(){B={r:0,c:[],p:B}}function V(){B.r||l(B.c),B=B.p}function Y(e,t){e&&e.i&&(q.delete(e),e.i(t))}function Z(e,t,n,o){if(e&&e.o){if(q.has(e))return;q.add(e),B.c.push(()=>{q.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}function D(e,t,o){const{fragment:i,on_mount:a,on_destroy:r,after_update:s}=e.$$;i.m(t,o),F(()=>{const t=a.map(n).filter(c);r?r.push(...t):l(t),e.$$.on_mount=[]}),s.forEach(F)}function G(e,t){e.$$.fragment&&(l(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function H(t,n,c,i,a,r){const s=b;M(t);const d=n.props||{},u=t.$$={fragment:null,ctx:null,props:r,update:e,not_equal:a,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(s?s.$$.context:[]),callbacks:o(),dirty:null};let p=!1;u.ctx=c?c(t,d,(e,n)=>{u.ctx&&a(u.ctx[e],u.ctx[e]=n)&&(u.bound[e]&&u.bound[e](n),p&&function(e,t){e.$$.dirty||(E.push(e),z(),e.$$.dirty=o()),e.$$.dirty[t]=!0}(t,e))}):d,u.update(),p=!0,l(u.before_update),u.fragment=i(u.ctx),n.target&&(n.hydrate?u.fragment.l(function(e){return Array.from(e.childNodes)}(n.target)):u.fragment.c(),n.intro&&Y(t.$$.fragment),D(t,n.target,n.anchor),j()),M(s)}class J{$destroy(){G(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}const K={};function Q(e){var t,n,o,l,c=e.editModeEnabled("point")&&R(e),i=e.editModeEnabled("polygon")&&W(e);return{c(){t=u("div"),(n=u("h4")).textContent="Mode",o=g(),c&&c.c(),l=g(),i&&i.c(),y(t,"class","pick-a-place__drawing-toolbar")},m(e,a){s(e,t,a),r(t,n),r(t,o),c&&c.m(t,null),r(t,l),i&&i.m(t,null)},p(e,n){n.editModeEnabled("point")?c?c.p(e,n):((c=R(n)).c(),c.m(t,l)):c&&(c.d(1),c=null),n.editModeEnabled("polygon")?i?i.p(e,n):((i=W(n)).c(),i.m(t,null)):i&&(i.d(1),i=null)},d(e){e&&d(t),c&&c.d(),i&&i.d()}}}function R(e){var t,n;return{c(){(t=u("button")).textContent="Point",t.dataset.testid="point-mode-btn",y(t,"type","button"),y(t,"class","pick-a-place__button"),v(t,"active","point"===e.mode),n=m(t,"click",$(e.click_handler))},m(e,n){s(e,t,n)},p(e,n){e.mode&&v(t,"active","point"===n.mode)},d(e){e&&d(t),n()}}}function W(e){var t,n;return{c(){(t=u("button")).textContent="Polygon",t.dataset.testid="polygon-mode-btn",y(t,"type","button"),y(t,"class","pick-a-place__button"),v(t,"active","polygon"===e.mode),n=m(t,"click",$(e.click_handler_1))},m(e,n){s(e,t,n)},p(e,n){e.mode&&v(t,"active","polygon"===n.mode)},d(e){e&&d(t),n()}}}function X(t){var n,o=t.selectionModes.length>1&&Q(t);return{c(){n=u("div"),o&&o.c(),y(n,"class","pick-a-place__drawing-toolbar-wrapper")},m(e,t){s(e,n,t),o&&o.m(n,null)},p(e,t){t.selectionModes.length>1?o?o.p(e,t):((o=Q(t)).c(),o.m(n,null)):o&&(o.d(1),o=null)},i:e,o:e,d(e){e&&d(n),o&&o.d()}}}function ee(e,t,n){const o=w(),{getMap:l,getLeaflet:c}=C(K);let{mode:i,selectionModes:a=["point","polygon"]}=t;const r=e=>{n("mode",i=e),o("setMode",i)};return e.$set=e=>{"mode"in e&&n("mode",i=e.mode),"selectionModes"in e&&n("selectionModes",a=e.selectionModes)},{mode:i,selectionModes:a,setMode:r,editModeEnabled:e=>a.includes(e),click_handler:function(){return r("point")},click_handler_1:function(){return r("polygon")}}}class te extends J{constructor(e){super(),H(this,e,ee,X,i,["mode","selectionModes"])}}function ne(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function oe(e,t,n){const{getMap:o,getLeaflet:l}=C(K),c=w();let i,{lat:a,lng:r,clickable:s=!1}=t,d=o(),u=l();const p=()=>{s&&c("click")};return x(()=>{i&&d.removeLayer(i)}),e.$set=e=>{"lat"in e&&n("lat",a=e.lat),"lng"in e&&n("lng",r=e.lng),"clickable"in e&&n("clickable",s=e.clickable)},e.$$.update=(e={lat:1,lng:1,marker:1,leaflet:1,map:1})=>{(e.lat||e.lng||e.marker||e.leaflet||e.map)&&(a&&r?i?i.setLatLng([a,r]):(n("marker",i=u.marker([a,r]).addTo(d)),i.on("click",p)):i&&d.removeLayer(i))},{lat:a,lng:r,clickable:s}}class le extends J{constructor(e){super(),H(this,e,oe,ne,i,["lat","lng","clickable"])}}function ce(e){var t,n=new le({props:{lat:e.lat,lng:e.lng}});return{c(){n.$$.fragment.c()},m(e,o){D(n,e,o),t=!0},p(e,t){var o={};e.lat&&(o.lat=t.lat),e.lng&&(o.lng=t.lng),n.$set(o)},i(e){t||(Y(n.$$.fragment,e),t=!0)},o(e){Z(n.$$.fragment,e),t=!1},d(e){G(n,e)}}}function ie(e){var t,n,o=e.lat&&e.lng&&ce(e);return{c(){o&&o.c(),t=f()},m(e,l){o&&o.m(e,l),s(e,t,l),n=!0},p(e,n){n.lat&&n.lng?o?(o.p(e,n),Y(o,1)):((o=ce(n)).c(),Y(o,1),o.m(t.parentNode,t)):o&&(U(),Z(o,1,1,()=>{o=null}),V())},i(e){n||(Y(o),n=!0)},o(e){Z(o),n=!1},d(e){o&&o.d(e),e&&d(t)}}}function ae(e,t,n){const o=w(),{getMap:l}=C(K);let c,i,{selection:a}=t,r=l();k(()=>{null!=a&&"Point"===a.geometry.type&&s(a.geometry.coordinates[0],a.geometry.coordinates[1])});const s=(e,t)=>{n("lng",i=e),n("lat",c=t),o("update",{lng:i,lat:c})},d=e=>{s(e.latlng.lng,e.latlng.lat)};return r.on("click",d),x(()=>r.off("click",d)),e.$set=e=>{"selection"in e&&n("selection",a=e.selection)},{selection:a,lat:c,lng:i}}class re extends J{constructor(e){super(),H(this,e,ae,ie,i,["selection"])}}function se(e,t){return e.lat===t.lat&&e.lng===t.lng}function de(e){var t,n=new le({props:{lat:e.coordinates[0].lat,lng:e.coordinates[0].lng,clickable:e.allowClosingPolygon}});return n.$on("click",e.closePolygon),{c(){n.$$.fragment.c()},m(e,o){D(n,e,o),t=!0},p(e,t){var o={};e.coordinates&&(o.lat=t.coordinates[0].lat),e.coordinates&&(o.lng=t.coordinates[0].lng),e.allowClosingPolygon&&(o.clickable=t.allowClosingPolygon),n.$set(o)},i(e){t||(Y(n.$$.fragment,e),t=!0)},o(e){Z(n.$$.fragment,e),t=!1},d(e){G(n,e)}}}function ue(e){var t,n,o=e.coordinates.length>0&&e.polyline.getLatLngs().length>0&&de(e);return{c(){o&&o.c(),t=f()},m(e,l){o&&o.m(e,l),s(e,t,l),n=!0},p(e,n){n.coordinates.length>0&&n.polyline.getLatLngs().length>0?o?(o.p(e,n),Y(o,1)):((o=de(n)).c(),Y(o,1),o.m(t.parentNode,t)):o&&(U(),Z(o,1,1,()=>{o=null}),V())},i(e){n||(Y(o),n=!0)},o(e){Z(o),n=!1},d(e){o&&o.d(e),e&&d(t)}}}function pe(e,t,n){const o=w(),{getMap:l}=C(K);let{coordinates:c=[]}=t;const i=l();let a,r=L.polyline([],{color:"red"}).addTo(i),s=L.polygon([],{color:"red"}).addTo(i);function d(){const e=c[0],t=c[c.length-1];c.length>1&&se(e,t)?(s.setLatLngs([c]),r.setLatLngs([]),o("complete",c)):(r.setLatLngs(c),s.setLatLngs([]))}return k(()=>d()),x(()=>{i.removeLayer(r),i.removeLayer(s)}),e.$set=e=>{"coordinates"in e&&n("coordinates",c=e.coordinates)},e.$$.update=(e={coordinates:1})=>{e.coordinates&&c.length>0&&d(),e.coordinates&&n("allowClosingPolygon",a=c.length>2&&!se(c[0],c[c.length-1]))},{coordinates:c,polyline:r,closePolygon:function(){n("coordinates",c=[...c,c[0]])},allowClosingPolygon:a}}class ge extends J{constructor(e){super(),H(this,e,pe,ue,i,["coordinates"])}}function fe(e){var t,n;function o(n){var o;e.leafletpolygon_coordinates_binding.call(null,n),t=!0,o=()=>t=!1,T.push(o)}let l={};void 0!==e.coordinates&&(l.coordinates=e.coordinates);var c=new ge({props:l});return P.push(()=>(function(e,t,n){-1!==e.$$.props.indexOf(t)&&(e.$$.bound[t]=n,n(e.$$.ctx[t]))})(c,"coordinates",o)),c.$on("complete",e.complete_handler),{c(){c.$$.fragment.c()},m(e,t){D(c,e,t),n=!0},p(e,n){var o={};!t&&e.coordinates&&(o.coordinates=n.coordinates),c.$set(o)},i(e){n||(Y(c.$$.fragment,e),n=!0)},o(e){Z(c.$$.fragment,e),n=!1},d(e){G(c,e)}}}function me(e,t,n){const o=w(),{getMap:l}=C(K);let{selection:c}=t,i=[],a=l();null!=c&&"Polygon"===c.geometry.type&&n("coordinates",i=c.geometry.coordinates[0].map(e=>({lat:e[1],lng:e[0]})));const r=e=>{i.length>2&&se(i[0],i[i.length-1])||(n("coordinates",i=[...i,e.latlng]),o("update",i))};return a.on("click",r),x(()=>a.off("click",r)),e.$set=e=>{"selection"in e&&n("selection",c=e.selection)},{dispatch:o,selection:c,coordinates:i,leafletpolygon_coordinates_binding:function(e){n("coordinates",i=e)},complete_handler:function({detail:e}){return o("complete",e)}}}class $e extends J{constructor(e){super(),H(this,e,me,fe,i,["selection"])}}function ye(e){return!Array.isArray(e)||e.length<2?he({type:"Point",coordinates:[(t=e).lng,t.lat]}):e.length>2&&se(e[0],e[e.length-1])?he({type:"Polygon",coordinates:[e.map(e=>[e.lng,e.lat])]}):function(e){return he({type:"LineString",coordinates:[e.map(e=>[e.lng,e.lat])]})}(e);var t}function he(e){return{type:"Feature",geometry:e}}function ve(e){var t,n=new $e({props:{selection:e.position}});return n.$on("update",e.update_handler_1),n.$on("complete",e.complete_handler),{c(){n.$$.fragment.c()},m(e,o){D(n,e,o),t=!0},p(e,t){var o={};e.position&&(o.selection=t.position),n.$set(o)},i(e){t||(Y(n.$$.fragment,e),t=!0)},o(e){Z(n.$$.fragment,e),t=!1},d(e){G(n,e)}}}function be(e){var t,n=new re({props:{selection:e.position}});return n.$on("update",e.update_handler),{c(){n.$$.fragment.c()},m(e,o){D(n,e,o),t=!0},p(e,t){var o={};e.position&&(o.selection=t.position),n.$set(o)},i(e){t||(Y(n.$$.fragment,e),t=!0)},o(e){Z(n.$$.fragment,e),t=!1},d(e){G(n,e)}}}function Me(e){var t;function n(e){return"point"===e.selectionMode?ke:"polygon"===e.selectionMode?_e:void 0}var o=n(e),l=o&&o(e);return{c(){t=u("div"),l&&l.c(),y(t,"class","pick-a-place__guide-panel"),t.dataset.testid="guide-overlay"},m(e,n){s(e,t,n),l&&l.m(t,null)},p(e,c){o===(o=n(c))&&l?l.p(e,c):(l&&l.d(1),(l=o&&o(c))&&(l.c(),l.m(t,null)))},d(e){e&&d(t),l&&l.d()}}}function _e(e){var t,n;return{c(){t=u("span"),n=p(e.polygonInstructionText)},m(e,o){s(e,t,o),r(t,n)},p(e,t){e.polygonInstructionText&&h(n,t.polygonInstructionText)},d(e){e&&d(t)}}}function ke(e){var t;function n(e){return null!=e.position&&null!=e.position.lat?we:xe}var o=n(e),l=o(e);return{c(){l.c(),t=f()},m(e,n){l.m(e,n),s(e,t,n)},p(e,c){o===(o=n(c))&&l?l.p(e,c):(l.d(1),(l=o(c))&&(l.c(),l.m(t.parentNode,t)))},d(e){l.d(e),e&&d(t)}}}function xe(t){var n;return{c(){(n=u("span")).textContent="Click the map to select a position"},m(e,t){s(e,n,t)},p:e,d(e){e&&d(n)}}}function we(e){var t,n,o,l,c,i=e.position.lat.toFixed(5),a=e.position.lng.toFixed(5);return{c(){t=u("span"),n=p("Latitude: "),o=p(i),l=p(" Longitude: "),c=p(a)},m(e,i){s(e,t,i),r(t,n),r(t,o),r(t,l),r(t,c)},p(e,t){e.position&&i!==(i=t.position.lat.toFixed(5))&&h(o,i),e.position&&a!==(a=t.position.lng.toFixed(5))&&h(c,a)},d(e){e&&d(t)}}}function Le(e){var t,n,o,c,i,a,f,h,v="polygon"===e.selectionMode&&e.selectionComplete&&Ce(e);return{c(){t=u("div"),(n=u("button")).textContent="Cancel",o=g(),v&&v.c(),c=g(),i=u("button"),a=p("Use selection"),y(n,"class","pick-a-place__button"),y(n,"type","button"),y(i,"class","pick-a-place__button"),y(i,"type","button"),i.disabled=f=!e.selectionComplete,y(t,"class","pick-a-place__button-panel"),t.dataset.testid="button-overlay",h=[m(n,"click",$(e.click_handler)),m(i,"click",$(e.click_handler_1))]},m(e,l){s(e,t,l),r(t,n),r(t,o),v&&v.m(t,null),r(t,c),r(t,i),r(i,a)},p(e,n){"polygon"===n.selectionMode&&n.selectionComplete?v||((v=Ce(n)).c(),v.m(t,c)):v&&(v.d(1),v=null),e.selectionComplete&&f!==(f=!n.selectionComplete)&&(i.disabled=f)},d(e){e&&d(t),v&&v.d(),l(h)}}}function Ce(e){var t,n;return{c(){(t=u("button")).textContent="Clear selection",y(t,"class","pick-a-place__button"),y(t,"type","button"),n=m(t,"click",$(e.resetSelection))},m(e,n){s(e,t,n)},d(e){e&&d(t),n()}}}function Oe(e){var t,n,o,l,c,i,a,r=new te({props:{mode:e.selectionMode,selectionModes:e.selectionModes}});r.$on("setMode",e.handleSetMode);var u=[be,ve],p=[];function m(e){return"point"===e.selectionMode?0:"polygon"===e.selectionMode?1:-1}~(n=m(e))&&(o=p[n]=u[n](e));var $=e.guideOverlay&&Me(e),y=e.buttons&&Le(e);return{c(){r.$$.fragment.c(),t=g(),o&&o.c(),l=g(),$&&$.c(),c=g(),y&&y.c(),i=f()},m(e,o){D(r,e,o),s(e,t,o),~n&&p[n].m(e,o),s(e,l,o),$&&$.m(e,o),s(e,c,o),y&&y.m(e,o),s(e,i,o),a=!0},p(e,t){var a={};e.selectionMode&&(a.mode=t.selectionMode),e.selectionModes&&(a.selectionModes=t.selectionModes),r.$set(a);var s=n;(n=m(t))===s?~n&&p[n].p(e,t):(o&&(U(),Z(p[s],1,1,()=>{p[s]=null}),V()),~n?((o=p[n])||(o=p[n]=u[n](t)).c(),Y(o,1),o.m(l.parentNode,l)):o=null),t.guideOverlay?$?$.p(e,t):(($=Me(t)).c(),$.m(c.parentNode,c)):$&&($.d(1),$=null),t.buttons?y?y.p(e,t):((y=Le(t)).c(),y.m(i.parentNode,i)):y&&(y.d(1),y=null)},i(e){a||(Y(r.$$.fragment,e),Y(o),a=!0)},o(e){Z(r.$$.fragment,e),Z(o),a=!1},d(e){G(r,e),e&&d(t),~n&&p[n].d(e),e&&d(l),$&&$.d(e),e&&d(c),y&&y.d(e),e&&d(i)}}}function Ee(e,t,n){const o=w();let{placeMarker:l=!0,guideOverlay:c=!0,buttons:i=!0,selectionModes:a,selectionMode:r=null,selection:s=null}=t,d=s,u=!1;null==r&&n("selectionMode",r=a[0]);const p=(e,t=!1)=>{n("selectionComplete",u=t),n("position",d=e),function(e){return!Array.isArray(e)||e.length>2&&se(e[0],e[e.length-1])}(d)&&o("update",ye(d))},g=e=>{p(e,!0)};let f;return e.$set=e=>{"placeMarker"in e&&n("placeMarker",l=e.placeMarker),"guideOverlay"in e&&n("guideOverlay",c=e.guideOverlay),"buttons"in e&&n("buttons",i=e.buttons),"selectionModes"in e&&n("selectionModes",a=e.selectionModes),"selectionMode"in e&&n("selectionMode",r=e.selectionMode),"selection"in e&&n("selection",s=e.selection)},e.$$.update=(e={position:1})=>{e.position&&n("polygonInstructionText",f=(e=>null!=e&&e.length?u?"Selection complete":e.length<=2?"Select the next point":e.length>2?"Add additional points or click the start position to finish editing.":void 0:"Select polygon start position")(d))},{dispatch:o,placeMarker:l,guideOverlay:c,buttons:i,selectionModes:a,selectionMode:r,selection:s,position:d,selectionComplete:u,setPosition:p,completePolygon:g,handleSetMode:({detail:e})=>{n("position",d=null),n("selectionComplete",u=!1),n("selectionMode",r=e)},resetSelection:async({detail:e})=>{n("selectionComplete",u=!1),n("position",d=null);const t=r;n("selectionMode",r=-1),await(z(),A),n("selectionMode",r=t)},polygonInstructionText:f,update_handler:function({detail:e}){return p(e,!0)},update_handler_1:function({detail:e}){return p(e)},complete_handler:function({detail:e}){return g(e)},click_handler:function(){return o("cancel")},click_handler_1:function(){return o("save",ye(d))}}}class Pe extends J{constructor(e){super(),H(this,e,Ee,Oe,i,["placeMarker","guideOverlay","buttons","selectionModes","selectionMode","selection"])}}function Se(e){var t,n=new Pe({props:{guideOverlay:e.guideOverlay,buttons:e.buttons,selection:e.selection,selectionModes:e.selectionModes,selectionMode:e.selectionMode}});return n.$on("update",e.update_handler),n.$on("save",e.save_handler),n.$on("cancel",e.cancel_handler),{c(){n.$$.fragment.c()},m(e,o){D(n,e,o),t=!0},p(e,t){var o={};e.guideOverlay&&(o.guideOverlay=t.guideOverlay),e.buttons&&(o.buttons=t.buttons),e.selection&&(o.selection=t.selection),e.selectionModes&&(o.selectionModes=t.selectionModes),e.selectionMode&&(o.selectionMode=t.selectionMode),n.$set(o)},i(e){t||(Y(n.$$.fragment,e),t=!0)},o(e){Z(n.$$.fragment,e),t=!1},d(e){G(n,e)}}}function Te(e){var n,o,l,c,i;const p=e.$$slots.default,f=function(e,t,n){if(e){const o=a(e,t,n);return e[0](o)}}(p,e,null);var m=e.map&&Se(e);return{c(){n=u("div"),o=u("div"),l=u("div"),f&&f.c(),c=g(),m&&m.c(),y(l,"class","pick-a-place__overlay-content"),y(o,"class","pick-a-place__overlay-container"),y(n,"class","pick-a-place svelte-pey6zq")},l(e){f&&f.l(div0_nodes)},m(t,a){s(t,n,a),r(n,o),r(o,l),f&&f.m(l,null),r(l,c),m&&m.m(l,null),e.div2_binding(n),i=!0},p(e,n){f&&f.p&&e.$$scope&&f.p(function(e,n,o,l){return e[1]?t({},t(n.$$scope.changed||{},e[1](l?l(o):{}))):n.$$scope.changed||{}}(p,n,e,null),a(p,n,null)),n.map?m?(m.p(e,n),Y(m,1)):((m=Se(n)).c(),Y(m,1),m.m(l,null)):m&&(U(),Z(m,1,1,()=>{m=null}),V())},i(e){i||(Y(f,e),Y(m),i=!0)},o(e){Z(f,e),Z(m),i=!1},d(t){t&&d(n),f&&f.d(t),m&&m.d(),e.div2_binding(null)}}}function Ae(e,t,n){let{leaflet:o,lat:l=45,lng:c=0,zoom:i=3,guideOverlay:a=!0,buttons:r=!0,selectionModes:s=["point","polygon"],selection:d=null}=t;var u,p;let g,f;u=K,p={getMap:()=>f,getLeaflet:()=>o},_().$$.context.set(u,p);let m=null;if(null!=d&&"object"!=typeof d)throw new Error('The value of "selection" must be an object');if(null!=d){const e=d.geometry.type.toLowerCase();if(!s.includes(e))throw new Error(`The provided default selection object has a geometry of type ${e}, which is not included in the allowed selection modes`);n("selectionMode",m=e)}k(()=>{if(null==o)throw new Error("No Leaflet instance was provided.");n("map",f=o.map(g).setView([l,c],i)),o.tileLayer("https://a.tile.openstreetmap.org/{z}/{x}/{y}.png ",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',maxZoom:18}).addTo(f)});let{$$slots:$={},$$scope:y}=t;return e.$set=e=>{"leaflet"in e&&n("leaflet",o=e.leaflet),"lat"in e&&n("lat",l=e.lat),"lng"in e&&n("lng",c=e.lng),"zoom"in e&&n("zoom",i=e.zoom),"guideOverlay"in e&&n("guideOverlay",a=e.guideOverlay),"buttons"in e&&n("buttons",r=e.buttons),"selectionModes"in e&&n("selectionModes",s=e.selectionModes),"selection"in e&&n("selection",d=e.selection),"$$scope"in e&&n("$$scope",y=e.$$scope)},{leaflet:o,lat:l,lng:c,zoom:i,guideOverlay:a,buttons:r,selectionModes:s,selection:d,mapElement:g,map:f,selectionMode:m,update_handler:function(t){O(e,t)},save_handler:function(t){O(e,t)},cancel_handler:function(t){O(e,t)},div2_binding:function(e){P[e?"unshift":"push"](()=>{n("mapElement",g=e)})},$$slots:$,$$scope:y}}return class extends J{constructor(e){super(),H(this,e,Ae,Te,i,["leaflet","lat","lng","zoom","guideOverlay","buttons","selectionModes","selection"])}}}();
